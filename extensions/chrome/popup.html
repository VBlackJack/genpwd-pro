<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GenPwd Pro</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ” <span data-i18n="extensionName">GenPwd Pro</span></h1>
    </header>

    <main>
      <!-- Vault Status -->
      <section id="vault-status" class="vault-status">
        <!-- Native Messaging: App not running -->
        <div id="native-disconnected" class="vault-status-panel hidden">
          <div class="status-icon">ğŸ“¡</div>
          <p class="status-text" data-i18n="appNotRunning">GenPwd Pro app is not running</p>
          <p class="status-hint" data-i18n="appNotRunningHint">Start the app to access your vault</p>
          <div class="status-actions">
            <button id="btn-retry-connect" class="btn-secondary" data-i18n="retryConnect">Retry</button>
            <button id="btn-use-local-vault" class="btn-secondary" data-i18n="useLocalVault">Load local file</button>
          </div>
        </div>

        <!-- Native Messaging: Connected but vault locked -->
        <div id="native-locked" class="vault-status-panel hidden">
          <div class="status-icon">ğŸ”’</div>
          <p class="status-text" data-i18n="vaultLockedApp">Vault is locked</p>
          <p class="status-hint" data-i18n="vaultLockedAppHint">Unlock the vault in GenPwd Pro app</p>
        </div>

        <!-- Native Messaging: Connected and unlocked -->
        <div id="native-connected" class="vault-status-panel hidden">
          <div class="vault-header">
            <span class="unlock-icon">ğŸ”“</span>
            <span id="vault-name-display" class="vault-name"></span>
          </div>
        </div>

        <!-- Local vault: No vault loaded -->
        <div id="vault-locked" class="vault-locked hidden">
          <div class="lock-icon">ğŸ”’</div>
          <p data-i18n="vaultLocked">No vault loaded</p>
          <button id="btn-load-vault" class="btn-secondary" data-i18n="loadVault">Load Vault</button>
          <input type="file" id="vault-file-input" accept=".gpdb" hidden>
        </div>

        <!-- Local vault: Enter password -->
        <div id="vault-unlock" class="vault-unlock hidden">
          <p data-i18n="enterPassword">Enter master password</p>
          <input type="password" id="master-password" class="input-field" placeholder="Master password" autocomplete="current-password">
          <button id="btn-unlock" class="btn-primary" data-i18n="unlock">Unlock</button>
          <p id="unlock-error" class="error-text hidden"></p>
        </div>

        <!-- Local vault: Unlocked -->
        <div id="vault-unlocked" class="vault-unlocked hidden">
          <div class="vault-header">
            <span class="unlock-icon">ğŸ”“</span>
            <span data-i18n="vaultUnlocked">Vault unlocked</span>
            <button id="btn-lock" class="btn-icon" title="Lock vault">ğŸ”’</button>
          </div>
        </div>
      </section>

      <!-- Tab Navigation -->
      <nav id="tab-nav" class="tab-nav hidden">
        <button class="tab-btn active" data-tab="autofill" data-i18n="tabAutofill">Autofill</button>
        <button class="tab-btn" data-tab="generator" data-i18n="tabGenerator">Generator</button>
        <button class="tab-btn" data-tab="settings" data-i18n="tabSettings">Settings</button>
      </nav>

      <!-- Autofill Tab -->
      <section id="tab-autofill" class="tab-content hidden">
        <div class="search-box">
          <input type="text" id="search-entries" class="input-field" placeholder="Search entries..." data-i18n-placeholder="searchPlaceholder">
        </div>

        <div id="current-site" class="current-site hidden">
          <span class="site-label" data-i18n="currentSite">Current site:</span>
          <span id="site-domain" class="site-domain"></span>
        </div>

        <div id="entries-list" class="entries-list">
          <p class="empty-message" data-i18n="noEntriesFound">No entries found</p>
        </div>
      </section>

      <!-- Generator Tab -->
      <section id="tab-generator" class="tab-content hidden">
        <div class="option-group">
          <label for="mode" data-i18n="modeLabel">Mode</label>
          <select id="mode" class="input-field">
            <option value="syllables" data-i18n="modeSyllables">Syllables</option>
            <option value="passphrase" data-i18n="modePassphrase">Passphrase</option>
            <option value="leet" data-i18n="modeLeet">Leet</option>
          </select>
        </div>

        <div id="syllables-options" class="mode-options">
          <div class="option-group">
            <label for="length" data-i18n="lengthLabel">Length</label>
            <input type="number" id="length" class="input-field" value="20" min="6" max="64">
          </div>
        </div>

        <div id="passphrase-options" class="mode-options hidden">
          <div class="option-group">
            <label for="wordCount" data-i18n="wordCountLabel">Words</label>
            <input type="number" id="wordCount" class="input-field" value="5" min="2" max="8">
          </div>
        </div>

        <div id="leet-options" class="mode-options hidden">
          <div class="option-group">
            <label for="leetWord" data-i18n="leetWordLabel">Word</label>
            <input type="text" id="leetWord" class="input-field" value="password">
          </div>
        </div>

        <div class="option-row">
          <div class="option-group">
            <label for="digits" data-i18n="digitsLabel">Digits</label>
            <input type="number" id="digits" class="input-field" value="2" min="0" max="6">
          </div>
          <div class="option-group">
            <label for="specials" data-i18n="specialsLabel">Specials</label>
            <input type="number" id="specials" class="input-field" value="2" min="0" max="6">
          </div>
        </div>

        <button id="generate-btn" class="btn-primary">ğŸ² <span data-i18n="generateButton">Generate</span></button>

        <div id="generated-password" class="generated-password hidden">
          <input type="text" id="password-output" class="password-output" readonly>
          <button id="btn-copy-generated" class="btn-icon" title="Copy">ğŸ“‹</button>
          <button id="btn-fill-generated" class="btn-icon" title="Fill">âœï¸</button>
        </div>
      </section>

      <!-- Settings Tab -->
      <section id="tab-settings" class="tab-content hidden">
        <div class="setting-item">
          <label>
            <input type="checkbox" id="setting-autofill-enabled" checked>
            <span data-i18n="settingAutofillEnabled">Enable autofill</span>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="setting-show-icon">
            <span data-i18n="settingShowIcon">Show icon on fields</span>
          </label>
        </div>
        <div class="setting-item">
          <label for="setting-lock-timeout" data-i18n="settingLockTimeout">Auto-lock timeout</label>
          <select id="setting-lock-timeout" class="input-field">
            <option value="60">1 min</option>
            <option value="300" selected>5 min</option>
            <option value="600">10 min</option>
            <option value="1800">30 min</option>
          </select>
        </div>
      </section>
    </main>

    <footer>
      <p class="footer-text">GenPwd Pro v3.0.3</p>
    </footer>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>
